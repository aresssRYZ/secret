:root{
  --bg1:#fde2f3; --bg2:#e2f0fb; --bg3:#ffe8e8; --glass:rgba(255,255,255,.6);
  --text:#2b2b2b; --muted:#6b7280; --primary:#ff4d8d; --primary-2:#a855f7;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--text);
  overflow:hidden; /* canvas background */
  background: radial-gradient(1200px 800px at 15% 10%, var(--bg1), transparent 60%),
              radial-gradient(1000px 900px at 85% 20%, var(--bg2), transparent 60%),
              radial-gradient(900px 700px at 50% 90%, var(--bg3), transparent 60%),
              linear-gradient(120deg, #fff 0%, #fff 40%, #fdf2f8 100%);
  animation:bg-pan 18s ease-in-out infinite alternate;
}
@keyframes bg-pan{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(20deg)}}
@media (prefers-reduced-motion: reduce){
  body{animation:none}
}

/* Canvas background */
#bg{ position:fixed; inset:0; width:100%; height:100%; z-index:-1; display:block }

main.container{ position:relative; max-width:960px; margin:0 auto; padding:28px 18px 48px; height:100%; overflow:auto }
header{ text-align:center; margin-top:16px }
h1{ margin:0 0 8px; font-weight:800; letter-spacing:.5px; font-size:clamp(28px,5vw,44px); background:linear-gradient(90deg,var(--primary), var(--primary-2)); -webkit-background-clip:text; background-clip:text; color:transparent; filter:drop-shadow(0 4px 22px rgba(255,77,141,.25)) }
header p{margin:4px 0 0; color:var(--muted); font-size:clamp(14px,2.2vw,16px)}

.card{ margin:28px auto 0; padding:22px; width:min(100%,820px); background:var(--glass); backdrop-filter:blur(14px) saturate(1.2); border:1px solid rgba(255,255,255,.7); border-radius:20px; box-shadow:0 20px 60px rgba(255,77,141,.18), 0 6px 20px rgba(0,0,0,.06) }

.typewriter{ font-size:clamp(16px,2.6vw,22px); line-height:1.6; min-height:2.2em; color:#4b5563; text-align:center; margin:8px auto 18px; max-width:680px}
.typewriter .caret{ display:inline-block; width:1px; background:#111827; margin-left:2px; animation:blink 1s steps(1,end) infinite }
@keyframes blink{50%{opacity:0}}

.controls{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:10px }
@media (min-width:720px){ .controls{ grid-template-columns:repeat(2,minmax(0,1fr)) } }

.field{ display:flex; flex-direction:column; gap:6px }
.label{ font-size:12px; letter-spacing:.3px; color:#6b7280; text-transform:uppercase }
.input, .date, .select{ appearance:none; border:1px solid rgba(0,0,0,.06); outline:none; border-radius:14px; padding:12px 14px; background:#fff; color:#111827; font-size:15px; box-shadow:0 3px 10px rgba(0,0,0,.04) inset }
.input:focus, .date:focus, .select:focus{ border-color:rgba(255,77,141,.45); box-shadow:0 0 0 4px rgba(255,77,141,.12) }

.buttons{ display:flex; flex-wrap:wrap; gap:10px; margin-top:6px }
.btn{ --shadow: rgba(255,77,141,.38); border:0; border-radius:999px; padding:12px 18px; cursor:pointer; font-weight:700; letter-spacing:.3px; background:linear-gradient(90deg,var(--primary),var(--primary-2)); color:#fff; box-shadow:0 10px 26px var(--shadow); transition: transform .08s ease, box-shadow .2s ease, filter .2s ease }
.btn:hover{ transform:translateY(-2px); filter:saturate(1.1); box-shadow:0 16px 36px var(--shadow) }
.btn:active{ transform:translateY(0) scale(.98) }
.btn-ghost{ background:#fff; color:#111827; border:1px solid rgba(0,0,0,.06); box-shadow:0 6px 16px rgba(0,0,0,.06) }

.range{ width:180px; accent-color: var(--primary) }

footer{ text-align:center; color:#6b7280; font-size:12px; margin:18px 0 8px }

/* Modal */
.modal{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.35); backdrop-filter:blur(2px); padding:20px; opacity:0; pointer-events:none; transition:opacity .2s ease }
.modal.show{opacity:1; pointer-events:auto}
.letter{ width:min(680px, 96vw); background:linear-gradient(180deg,#fff, #fff8fb); border-radius:22px; border:1px solid rgba(0,0,0,.06); padding:22px 22px 14px; box-shadow:0 30px 80px rgba(0,0,0,.3); position:relative; overflow:hidden }
.letter::before{ content:""; position:absolute; inset:-30% -20% auto -20%; height:60%; filter:blur(28px); background:radial-gradient(200px 120px at 25% 50%, rgba(255,77,141,.35), transparent), radial-gradient(220px 140px at 75% 30%, rgba(168,85,247,.3), transparent) }
.letter h2{ margin:0 0 12px; font-size:22px }
.letter p{ margin:0 0 10px; color:#374151; line-height:1.7 }
.close{ position:absolute; top:12px; right:12px; border:0; background:#fff; border-radius:999px; width:34px; height:34px; box-shadow:0 6px 16px rgba(0,0,0,.1); cursor:pointer }
.close:before{ content:"âœ•"; font-size:16px }

.kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background:#f3f4f6; padding:.1em .45em; border-radius:6px; border:1px solid #e5e7eb}

/* Tiny floating badge */
.floating-tip{ position:fixed; bottom:16px; right:16px; font-size:12px; color:#6b7280; background:rgba(255,255,255,.7); border:1px solid rgba(0,0,0,.06); border-radius:999px; padding:8px 12px; backdrop-filter:blur(12px) }

/* === Tema === */
/* theme-merona is default */
body.theme-sunset{ --bg1:#ffe6cc; --bg2:#fff1d6; --bg3:#ffe4e1; --primary:#ff7a18; --primary-2:#ff3e62 }
body.theme-ocean{ --bg1:#d1f0ff; --bg2:#e0fbff; --bg3:#d8f7f0; --primary:#00aaff; --primary-2:#00d1b2 }
body.theme-forest{ --bg1:#e2f7e1; --bg2:#d7f0e6; --bg3:#f0ffe3; --primary:#22c55e; --primary-2:#16a34a }

/* === Font === */
body.font-serif{ font-family: 'Playfair Display', Georgia, Cambria, 'Times New Roman', Times, serif }
body.font-handwriting{ font-family:'Caveat', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial }

:focus-visible{ outline: 3px solid rgba(255,77,141,.4); outline-offset: 2px }
